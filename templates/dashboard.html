<!-- templates/dashboard.html -->
{% extends "base.html" %}

{% block content %}
<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold"><i class="bi bi-speedometer2"></i> Dashboard Admin</h2>
    <span class="badge bg-primary fs-6">Hai, {{ current_user.username }}</span>
  </div>

  <!-- Ringkasan Utama -->
  <div class="row g-4 mb-4">
    <div class="col-md-3">
      <div class="card bg-primary text-white text-center h-100">
        <div class="card-body">
          <h6 class="text-white-50">Total Jiwa</h6>
          <p class="display-6 mb-0">{{ total_jiwa }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card bg-success text-white text-center h-100">
        <div class="card-body">
          <h6 class="text-white-50">Total KK</h6>
          <p class="display-6 mb-0">{{ total_kk }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card bg-info text-white text-center h-100">
        <div class="card-body">
          <h6 class="text-white-50">Dusun</h6>
          <p class="display-6 mb-0">{{ dusun_data|length }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card bg-warning text-dark text-center h-100">
        <div class="card-body">
          <h6 class="text-dark-50">Terinput</h6>
          <div class="progress my-2">
            <div class="progress-bar bg-success" style="width: {{ "%.0f"|format((total_jiwa / 682) * 100) }}%"></div>
          </div>
          <small>{{ "%.1f"|format((total_jiwa / 682) * 100) }}%</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Grafik -->
  <div class="row g-4">
    <!-- Jiwa per Dusun -->
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-light">
          <h5><i class="bi bi-people"></i> Jiwa per Dusun</h5>
        </div>
        <div class="card-body text-center">
          {% if dusun_data %}
            <img src="{{ url_for('static', filename='charts/chart_dusun.png') }}" class="img-fluid" alt="Jiwa per Dusun">
          {% else %}
            <p class="text-muted">Belum ada data</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Agama -->
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-light">
          <h5><i class="bi bi-people-fill"></i> Komposisi Agama</h5>
        </div>
        <div class="card-body text-center">
          {% if agama_data %}
            <img src="{{ url_for('static', filename='charts/chart_agama.png') }}" class="img-fluid" alt="Komposisi Agama">
          {% else %}
            <p class="text-muted">Belum ada data</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Pendidikan -->
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-light">
          <h5><i class="bi bi-mortarboard"></i> Pendidikan Terakhir</h5>
        </div>
        <div class="card-body text-center">
          {% if pendidikan_data %}
            <img src="{{ url_for('static', filename='charts/chart_pendidikan.png') }}" class="img-fluid" alt="Pendidikan Terakhir">
          {% else %}
            <p class="text-muted">Belum ada data</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Pertumbuhan -->
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-light">
          <h5><i class="bi bi-graph-up"></i> Pertumbuhan Penduduk</h5>
        </div>
        <div class="card-body text-center">
          {% if pertumbuhan_data %}
            <img src="{{ url_for('static', filename='charts/chart_pertumbuhan.png') }}" class="img-fluid" alt="Pertumbuhan Penduduk">
          {% else %}
            <p class="text-muted">Belum ada data</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <!-- Aksi Cepat -->
  <div class="row mt-4">
    <div class="col-12">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5><i class="bi bi-tools"></i> Aksi Cepat</h5>
          <div class="d-flex flex-wrap gap-2 mt-3">
            <a href="/tambah" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Tambah Data</a>
            <a href="/upload" class="btn btn-info text-white"><i class="bi bi-upload"></i> Upload Excel</a>
            <a href="/cetak" class="btn btn-success"><i class="bi bi-printer"></i> Cetak</a>
            <a href="/statistik" class="btn btn-warning text-dark"><i class="bi bi-bar-chart"></i> Statistik</a>
            <a href="/progress" class="btn btn-secondary"><i class="bi bi-chart-line"></i> Progress</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}